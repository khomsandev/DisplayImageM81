# -----------------------------
# 1️⃣ ใช้ Python base image
# -----------------------------
FROM python:3.10-slim

# -----------------------------
# 2️⃣ ตั้ง working directory
# -----------------------------
WORKDIR /app

# -----------------------------
# 3️⃣ คัดลอกไฟล์ requirements.txt และติดตั้ง dependencies
# -----------------------------
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# -----------------------------
# 4️⃣ คัดลอก source code ทั้งหมดเข้า container
# -----------------------------
COPY . .

# -----------------------------
# 5️⃣ เปิด port 5173 (หรือปรับตามต้องการ)
# -----------------------------
EXPOSE 5173

# -----------------------------
# 6️⃣ รัน FastAPI ด้วย Uvicorn
# -----------------------------
CMD ["uvicorn", "main:app", "--host", "0.0.0.0", "--port", "5173"]
